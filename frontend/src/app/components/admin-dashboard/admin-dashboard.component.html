<div class="container">
  <h2 class="gradient-text mb-4">Admin Dashboard</h2>

  <div class="stats mb-4">
    <div class="glass-panel stat-card">
       <h3>Total</h3>
       <div class="val">{{ complaints.length }}</div>
    </div>
    <div class="glass-panel stat-card">
       <h3>Open</h3>
       <div class="val text-warn">{{ (complaints | filterStatus:'Open').length }}</div>
    </div>
  </div>

  <div class="glass-panel list-container">
    <div class="list-header">
      <div>ID</div>
      <div>Title</div>
      <div>Status</div>
      <div>Priority</div>
      <div>Assigned To</div>
      <div>Action</div>
    </div>
    
    <div class="list-row" *ngFor="let item of complaints">
      <div class="col-id">#{{ item.id }}</div>
      <div class="col-title">
        <div class="main">{{ item.title }}</div>
        <div class="sub">{{ item.category }} â€¢ {{ item.created_at | date:'shortDate' }}</div>
      </div>
      <div>
         <span class="badge" [ngClass]="item.status.toLowerCase()">{{ item.status }}</span>
      </div>
      <div>
         <span class="badge" [ngClass]="(item.priority || 'Medium').toLowerCase()">{{ item.priority || 'Medium' }}</span>
      </div>
      <div>
        <span *ngIf="item.staff_id">{{ item.assigned_to || 'Staff #' + item.staff_id }}</span>
        <span *ngIf="!item.staff_id" class="text-mute">Unassigned</span>
      </div>
      <div class="actions">
        <select #staffSelect (change)="assignStaff(item, staffSelect.value)" *ngIf="item.status === 'Open'">
          <option value="">Assign Staff...</option>
          <option *ngFor="let staff of staffList" [value]="staff.id">{{ staff.name }}</option>
        </select>
        <span *ngIf="item.status !== 'Open'" class="text-success">Using Workflow</span>
      </div>
    </div>
  </div>
</div>
